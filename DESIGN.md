# ğŸš€ ĞŸÑ€Ğ¾ĞµĞºÑ‚ **Titan** â€” ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ğ»ÑƒÑ‡ÑˆĞµĞ³Ğ¾ Ğ¸Ğ· Apex Ğ¸ Granit

## Ğ¤Ğ¸Ğ»Ğ¾ÑĞ¾Ñ„Ğ¸Ñ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

**Titan** = **T**rend **I**ntelligence **T**racking **A**daptive **N**etwork

> ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ BTCUSDT, Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ÑÑÑ‰Ğ°Ñ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ñ‚Ñƒ PyTorch Ñ Ğ¼Ğ¾Ñ‰ÑŒÑ ensemble-Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ°.

---

## ğŸ“Œ Ğ¦ĞµĞ»ÑŒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ Ñ†ĞµĞ½Ñ‹ **BTCUSDT** Ğ½Ğ° Ñ€Ğ°Ğ·Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ³Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ñ… (1m, 5m, 10m, 15m, 30m, 60m) Ñ Ñ†ĞµĞ»ĞµĞ²Ğ¾Ğ¹ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒÑ **â‰¥75%**.

**Ğ’Ğ°Ğ¶Ğ½Ğ¾:** Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ, **Ğ½Ğµ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ»Ñ**.

---

## ğŸ“ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº | ĞĞ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ |
|-----------|----------|-------------|
| **ML Framework** | PyTorch (Apex) | Ğ¨Ğ¸Ñ€Ğ¾ĞºĞ°Ñ ÑĞºĞ¾ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ°Ñ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ°, ONNX ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚ |
| **Ensemble** | Granit | Ğ Ğ¾Ğ±Ğ°ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ, Ñ€Ğ°Ğ·Ğ½Ğ¾Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¸Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹ |
| **Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ½Ğ°Ğ³Ñ€Ğ°Ğ´** | Apex + Granit | Ğ‘Ğ¸Ğ½Ñ‹ + 3-ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ñ‹Ğµ ÑˆÑ‚Ñ€Ğ°Ñ„Ñ‹ |
| **ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½-Ğ¶ÑƒÑ€Ğ½Ğ°Ğ»** | Apex | ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ¸ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ² |
| **MC Dropout** | Granit | ĞÑ†ĞµĞ½ĞºĞ° Ğ½ĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½Ğ½Ğ¾ÑÑ‚Ğ¸ |
| **ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹** | Apex | ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ, Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ |
| **ĞœĞµĞ¶Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ** | Granit | ĞœĞ¾Ğ´ĞµĞ»Ğ¸ ÑƒÑ‡Ğ°Ñ‚ÑÑ Ğ´Ñ€ÑƒĞ³ Ñƒ Ğ´Ñ€ÑƒĞ³Ğ° |

---

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
titan/
â”œâ”€â”€ README.md
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ base.yaml                 # Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”‚   â”œâ”€â”€ ensemble.yaml             # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ°Ğ½ÑĞ°Ğ¼Ğ±Ğ»Ñ
â”‚   â”œâ”€â”€ rewards.yaml              # ĞĞ°Ğ³Ñ€Ğ°Ğ´Ñ‹/ÑˆÑ‚Ñ€Ğ°Ñ„Ñ‹
â”‚   â””â”€â”€ thresholds.yaml           # ĞŸĞ¾Ñ€Ğ¾Ğ³Ğ¸ Ğ¸ ĞºĞ°Ğ»Ğ¸Ğ±Ñ€Ğ¾Ğ²ĞºĞ°
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                     # Ğ¯Ğ´Ñ€Ğ¾ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ config.py             # Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ¾Ğ² (dataclasses)
â”‚   â”‚   â”œâ”€â”€ types.py              # ĞĞ±Ñ‰Ğ¸Ğµ Ñ‚Ğ¸Ğ¿Ñ‹ (Signal, Prediction, etc.)
â”‚   â”‚   â””â”€â”€ constants.py          # ĞšĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹ (Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ñ‹, Ğ±Ğ¸Ğ½Ñ‹)
â”‚   â”‚
â”‚   â”œâ”€â”€ data/                     # Data Layer
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ bybit_client.py       # REST + WebSocket ĞºĞ»Ğ¸ĞµĞ½Ñ‚
â”‚   â”‚   â”œâ”€â”€ candle.py             # Dataclass ÑĞ²ĞµÑ‡Ğ¸
â”‚   â”‚   â”œâ”€â”€ storage.py            # SQLite + Parquet Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ
â”‚   â”‚   â”œâ”€â”€ replay_buffer.py      # ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ½Ñ‹Ğ¹ replay buffer
â”‚   â”‚   â””â”€â”€ normalizer.py         # ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â”‚   â”‚
â”‚   â”œâ”€â”€ features/                 # Feature Engineering
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ calculators.py        # ATR, RSI, MACD, Bollinger
â”‚   â”‚   â”œâ”€â”€ pipeline.py           # Feature pipeline
â”‚   â”‚   â””â”€â”€ labels.py             # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ»ĞµĞ¹Ğ±Ğ»Ğ¾Ğ² (close/extrema)
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                   # ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹ Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base.py               # BaseModel (Ğ°Ğ±ÑÑ‚Ñ€Ğ°ĞºÑ‚Ğ½Ñ‹Ğ¹ ĞºĞ»Ğ°ÑÑ)
â”‚   â”‚   â”œâ”€â”€ lstm_model.py         # LSTM backbone (Ğ¸Ğ· Apex)
â”‚   â”‚   â”œâ”€â”€ transformer_model.py  # Transformer-lite backbone
â”‚   â”‚   â”œâ”€â”€ dual_head.py          # Dual-Head (UP/DOWN) Ñ cross-connect
â”‚   â”‚   â””â”€â”€ model_factory.py      # Ğ¤Ğ°Ğ±Ñ€Ğ¸ĞºĞ° Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹
â”‚   â”‚
â”‚   â”œâ”€â”€ ensemble/                 # Ensemble ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° (Ğ¸Ğ· Granit)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ predictor.py          # EnsemblePredictor
â”‚   â”‚   â”œâ”€â”€ model_wrapper.py      # ĞĞ±Ñ‘Ñ€Ñ‚ĞºĞ° Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ + MC Dropout
â”‚   â”‚   â”œâ”€â”€ weight_manager.py     # EMA Ğ²ĞµÑĞ° Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹
â”‚   â”‚   â”œâ”€â”€ voting.py             # Ğ’Ğ·Ğ²ĞµÑˆĞµĞ½Ğ½Ğ¾Ğµ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
â”‚   â”‚   â”œâ”€â”€ inter_model.py        # ĞœĞµĞ¶Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ
â”‚   â”‚   â””â”€â”€ config_generator.py   # ĞĞ²Ñ‚Ğ¾Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ² Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹
â”‚   â”‚
â”‚   â”œâ”€â”€ rewards/                  # Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ½Ğ°Ğ³Ñ€Ğ°Ğ´/ÑˆÑ‚Ñ€Ğ°Ñ„Ğ¾Ğ²
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ bins.py               # Ğ‘Ğ¸Ğ½Ñ‹ Ğ¿Ğ¾ Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ½Ğµ (Ğ¸Ğ· Apex)
â”‚   â”‚   â”œâ”€â”€ penalties.py          # 3-ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ñ‹Ğµ ÑˆÑ‚Ñ€Ğ°Ñ„Ñ‹ (Ğ¸Ğ· Granit)
â”‚   â”‚   â”œâ”€â”€ rewards.py            # ĞĞ°Ğ³Ñ€Ğ°Ğ´Ñ‹ Ğ¸ Ğ±Ğ¾Ğ½ÑƒÑÑ‹
â”‚   â”‚   â”œâ”€â”€ streak_tracker.py     # Ğ¢Ñ€ĞµĞºĞµÑ€ ÑĞµÑ€Ğ¸Ğ¹ (3 ÑƒÑ€Ğ¾Ğ²Ğ½Ñ)
â”‚   â”‚   â””â”€â”€ calculator.py         # ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ñ‘Ğ½Ğ½Ñ‹Ğ¹ ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€
â”‚   â”‚
â”‚   â”œâ”€â”€ patterns/                 # ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½-Ğ¶ÑƒÑ€Ğ½Ğ°Ğ» (Ğ¸Ğ· Apex)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ pattern.py            # Dataclass Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ°
â”‚   â”‚   â”œâ”€â”€ journal.py            # Ğ–ÑƒÑ€Ğ½Ğ°Ğ» Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²
â”‚   â”‚   â”œâ”€â”€ clustering.py         # ĞšĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑĞµĞ¼ĞµĞ¹ÑÑ‚Ğ²
â”‚   â”‚   â””â”€â”€ decay.py              # Decay Ğ¸ GC ÑÑ‚Ğ°Ñ€Ñ‹Ñ… Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ¾Ğ²
â”‚   â”‚
â”‚   â”œâ”€â”€ calibration/              # ĞšĞ°Ğ»Ğ¸Ğ±Ñ€Ğ¾Ğ²ĞºĞ° (Ğ¸Ğ· Apex)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ temperature.py        # Temperature scaling per-horizon
â”‚   â”‚   â”œâ”€â”€ thresholds.py         # ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ñ€Ğ¾Ğ³Ğ¸ c_thr
â”‚   â”‚   â””â”€â”€ metrics.py            # ECE, MCE, Brier score
â”‚   â”‚
â”‚   â”œâ”€â”€ training/                 # ĞĞ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ trainer.py            # Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ trainer
â”‚   â”‚   â”œâ”€â”€ online_trainer.py     # Online learning (ĞºĞ°Ğ¶Ğ´ÑƒÑ Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñƒ)
â”‚   â”‚   â”œâ”€â”€ offline_trainer.py    # Batch + simulated-online
â”‚   â”‚   â”œâ”€â”€ loss.py               # Multi-task loss (direction + bin)
â”‚   â”‚   â””â”€â”€ optimizer.py          # AdamW + gradient clipping
â”‚   â”‚
â”‚   â”œâ”€â”€ inference/                # Ğ˜Ğ½Ñ„ĞµÑ€ĞµĞ½Ñ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ predictor.py          # Inference engine
â”‚   â”‚   â”œâ”€â”€ consensus.py          # Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° ĞºĞ¾Ğ½ÑĞµĞ½ÑÑƒÑĞ°
â”‚   â”‚   â””â”€â”€ mc_dropout.py         # MC Dropout inference
â”‚   â”‚
â”‚   â””â”€â”€ utils/                    # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ logging_utils.py      # Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
â”‚       â”œâ”€â”€ gpu_monitor.py        # ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ GPU
â”‚       â”œâ”€â”€ checkpoints.py        # Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ/Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ‡ĞµĞºĞ¿Ğ¾Ğ¸Ğ½Ñ‚Ğ¾Ğ²
â”‚       â””â”€â”€ version.py            # Ğ•Ğ´Ğ¸Ğ½Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ
â”‚
â”œâ”€â”€ services/                     # ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ (Ğ¸Ğ· Apex)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ collector/                # Ğ¡Ğ±Ğ¾Ñ€ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ main.py               # WebSocket + REST fetcher
â”‚   â”‚
â”‚   â”œâ”€â”€ trainer/                  # Ğ¡ĞµÑ€Ğ²Ğ¸Ñ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ main.py               # Online + offline training
â”‚   â”‚
â”‚   â”œâ”€â”€ inferencer/               # Ğ¡ĞµÑ€Ğ²Ğ¸Ñ Ğ¸Ğ½Ñ„ĞµÑ€ĞµĞ½ÑĞ°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ main.py               # Prediction service
â”‚   â”‚
â”‚   â””â”€â”€ server/                   # API + Dashboard
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ main.py               # FastAPI ÑĞµÑ€Ğ²ĞµÑ€
â”‚       â”œâ”€â”€ routes/
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ api.py            # REST endpoints
â”‚       â”‚   â””â”€â”€ websocket.py      # WebSocket Ğ´Ğ»Ñ live updates
â”‚       â””â”€â”€ static/
â”‚           â”œâ”€â”€ index.html        # Dashboard
â”‚           â”œâ”€â”€ css/
â”‚           â”œâ”€â”€ js/
â”‚           â””â”€â”€ assets/
â”‚
â”œâ”€â”€ scripts/                      # CLI ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹
â”‚   â”œâ”€â”€ download_history.py       # Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â”‚   â”œâ”€â”€ pretrain.py               # ĞŸÑ€ĞµĞ´Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ°Ğ½ÑĞ°Ğ¼Ğ±Ğ»Ñ
â”‚   â”œâ”€â”€ run_live.py               # Ğ—Ğ°Ğ¿ÑƒÑĞº live Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ°
â”‚   â””â”€â”€ evaluate.py               # ĞÑ†ĞµĞ½ĞºĞ° Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
â”‚
â”œâ”€â”€ tests/                        # Ğ¢ĞµÑÑ‚Ñ‹
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_rewards.py
â”‚   â”œâ”€â”€ test_patterns.py
â”‚   â”œâ”€â”€ test_ensemble.py
â”‚   â”œâ”€â”€ test_calibration.py
â”‚   â””â”€â”€ test_e2e.py
â”‚
â”œâ”€â”€ artifacts/                    # ĞÑ€Ñ‚ĞµÑ„Ğ°ĞºÑ‚Ñ‹ (gitignore)
â”‚   â”œâ”€â”€ checkpoints/
â”‚   â”œâ”€â”€ patterns/
â”‚   â””â”€â”€ reports/
â”‚
â”œâ”€â”€ data/                         # Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ (gitignore)
â”‚   â”œâ”€â”€ candles/
â”‚   â””â”€â”€ cache/
â”‚
â”œâ”€â”€ logs/                         # Ğ›Ğ¾Ğ³Ğ¸ (gitignore)
â”‚
â””â”€â”€ titan.py                      # Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ CLI Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ°
```

---

## ğŸ§  ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸

### Dual-Head Ensemble Ñ Cross-Connect

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         TITAN ENSEMBLE                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Model 0     â”‚  â”‚  Model 1     â”‚  â”‚  Model 2     â”‚  â”‚  Model N     â”‚ â”‚
â”‚  â”‚  LSTM        â”‚  â”‚  LSTM        â”‚  â”‚  Transformer â”‚  â”‚  Transformer â”‚ â”‚
â”‚  â”‚  lr=1e-4     â”‚  â”‚  lr=5e-4     â”‚  â”‚  lr=1e-4     â”‚  â”‚  lr=1e-3     â”‚ â”‚
â”‚  â”‚  drop=0.1    â”‚  â”‚  drop=0.15   â”‚  â”‚  drop=0.1    â”‚  â”‚  drop=0.2    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                 â”‚                 â”‚                 â”‚          â”‚
â”‚         â–¼                 â–¼                 â–¼                 â–¼          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                    MC Dropout (5-10 passes)                         â”‚â”‚
â”‚  â”‚                p_up_mean, p_up_std, p_down_mean, p_down_std         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                    â”‚                                     â”‚
â”‚                                    â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚              Weighted Voting (EMA weights Ã— uncertainty)            â”‚â”‚
â”‚  â”‚    effective_weight = ema_weight Ã— (1 - penalty Ã— uncertainty)      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                    â”‚                                     â”‚
â”‚                                    â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                         CONSENSUS CHECK                             â”‚â”‚
â”‚  â”‚         consensus >= 0.7 && confidence > threshold â†’ SIGNAL         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                    â”‚                                     â”‚
â”‚                                    â–¼                                     â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                    â”‚  UP / DOWN / HOLD + conf  â”‚                         â”‚
â”‚                    â”‚  per timeframe            â”‚                         â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ (Dual-Head)

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     Input: OHLCV + Features â”‚
                    â”‚     (batch, seq_len, dim)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     SHARED ENCODER          â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                    â”‚  â”‚ LSTM / Transformer     â”‚ â”‚
                    â”‚  â”‚ (configurable)         â”‚ â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      LATENT SPACE           â”‚
                    â”‚      (batch, d_model)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚             â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   UP HEAD      â”‚â—„â”€â”€â–º   DOWN HEAD      â”‚
              â”‚                â”‚crossâ”‚                â”‚
              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚conn.â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
              â”‚ â”‚ Per-horizonâ”‚ â”‚     â”‚ â”‚ Per-horizonâ”‚ â”‚
              â”‚ â”‚ 1m,5m,...  â”‚ â”‚     â”‚ â”‚ 1m,5m,...  â”‚ â”‚
              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚                      â”‚
                      â–¼                      â–¼
              P(UP) per TF            P(DOWN) per TF
```

---

## âš–ï¸ Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ½Ğ°Ğ³Ñ€Ğ°Ğ´ Ğ¸ ÑˆÑ‚Ñ€Ğ°Ñ„Ğ¾Ğ²

### ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ñ‘Ğ½Ğ½Ğ°Ñ 3-ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°

```yaml
# config/rewards.yaml

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ğ‘Ğ˜ĞĞ« ĞŸĞ Ğ’Ğ•Ğ›Ğ˜Ğ§Ğ˜ĞĞ• Ğ”Ğ’Ğ˜Ğ–Ğ•ĞĞ˜Ğ¯ (Ğ¸Ğ· Apex)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
bins:
  # m = |Î”p| / ATR_L
  - name: "tiny"
    upper: 0.05
    weight: 0.25
  - name: "small"
    upper: 0.25
    weight: 0.50
  - name: "medium"
    upper: 0.75
    weight: 1.0
  - name: "large"
    upper: 1.50
    weight: 2.0
  - name: "extreme"
    upper: null  # +inf
    weight: 3.0

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ğ¤ĞĞ ĞœĞ£Ğ›Ğ« (Ğ¸Ğ· Apex)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
formulas:
  alpha: 1.5          # g_conf(c) = c^Î±
  c_min: 0.1          # Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑƒĞ²ĞµÑ€ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ
  r_max: 5.0          # Ğ¿Ğ¾Ñ‚Ğ¾Ğ»Ğ¾Ğº Ğ½Ğ°Ğ³Ñ€Ğ°Ğ´Ñ‹
  penalty_scale: 1.0
  lambda_flat: 0.5    # ÑˆÑ‚Ñ€Ğ°Ñ„ Ğ·Ğ° FLAT
  m_tiny: 0.05        # Ğ¿Ğ¾Ñ€Ğ¾Ğ³ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° ÑˆÑ‚Ñ€Ğ°Ñ„Ğ° FLAT

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 3-Ğ£Ğ ĞĞ’ĞĞ•Ğ’Ğ«Ğ• Ğ¨Ğ¢Ğ ĞĞ¤Ğ« (Ğ¸Ğ· Granit)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
penalties:
  # Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 1: Ğ˜Ğ½Ğ´Ğ¸Ğ²Ğ¸Ğ´ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ
  individual:
    streak_multipliers: [1.0, 1.2, 1.5, 2.0, 3.0]  # -1, -2, -3, -4, -5+
    confident_error_bonus: 1.0   # +100% Ğ·Ğ° ÑƒĞ²ĞµÑ€ĞµĞ½Ğ½ÑƒÑ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ
    leader_penalty_mult: 1.5     # Ğ»Ğ¸Ğ´ĞµÑ€ Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ĞµÑ‚ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ
    cross_specialization: 1.5    # ÑˆÑ‚Ñ€Ğ°Ñ„ Ğ·Ğ° "Ñ‡ÑƒĞ¶Ğ¸Ğµ" Ğ¿Ñ€ĞµĞ´ÑĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ñ

  # Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 2: Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¾Ğ²Ğ¾Ğ¹ (UP/DOWN)
  group:
    streak_multipliers: [1.0, 1.3, 1.6, 2.0]  # -1, -2, -3, -4+
    
  # Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ 3: Ğ¢Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼
  timeframe:
    streak_warning_threshold: 5   # âš ï¸ WARNING
    streak_pause_threshold: 7     # ğŸ›‘ AUTO-PAUSE
    lr_increase_per_streak: 0.1   # +10% LR Ğ·Ğ° ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ streak

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ĞĞĞ“Ğ ĞĞ”Ğ« (ĞºĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
rewards:
  individual:
    streak_multipliers: [1.0, 1.1, 1.2, 1.3]  # +1, +2, +3, +4+
    minority_winner_bonus: 2.0    # Ğ±Ñ‹Ğ» Ğ² Ğ¼ĞµĞ½ÑŒÑˆĞ¸Ğ½ÑÑ‚Ğ²Ğµ Ğ¸ ÑƒĞ³Ğ°Ğ´Ğ°Ğ»
    
  group:
    consensus_bonus: 1.2          # Ğ²ÑÑ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ° ÑƒĞ³Ğ°Ğ´Ğ°Ğ»Ğ°
```

### Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ°

```python
# Reward (ÑƒĞ³Ğ°Ğ´Ğ°Ğ½ Ğ·Ğ½Ğ°Ğº):
R = w_bin Ã— g_conf(c) Ã— g_mag(m) Ã— streak_mult Ã— (consensus_bonus if all_correct)
R = min(R, R_max)

# Penalty (Ğ½Ğµ ÑƒĞ³Ğ°Ğ´Ğ°Ğ½):
P = w_bin Ã— g_conf(c) Ã— g_mag(m) Ã— ind_streak Ã— group_streak Ã— (leader_mult if is_leader)

# FLAT penalty:
P_flat = w_bin Ã— max(0, m - m_tiny) Ã— Î»_flat

# Ğ³Ğ´Ğµ:
# g_conf(c) = max(c, c_min)^Î±
# g_mag(m) = 1 + log(1 + m)
```

---

## ğŸ“Š ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½-Ğ¶ÑƒÑ€Ğ½Ğ°Ğ»

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ°

```python
@dataclass
class Pattern:
    """ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½ Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ¹ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸ĞµĞ¹ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ."""
    
    # Ğ˜Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ
    id: str                       # hash(Ğ°Ñ€Ñ…ĞµÑ‚Ğ¸Ğ¿ + horizon)
    archetype: str                # ÑĞ¸Ğ³Ğ½Ğ°Ñ‚ÑƒÑ€Ğ° Ñ„Ğ¸Ñ‡
    horizon: int                  # Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼
    
    # Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°
    count: int = 0                # ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ñ€Ğ°Ğ· Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑĞ»ÑÑ
    wins: int = 0                 # ÑƒÑĞ¿ĞµÑ…Ğ¸
    losses: int = 0               # Ğ½ĞµÑƒĞ´Ğ°Ñ‡Ğ¸
    
    # Ğ¡ĞµÑ€Ğ¸Ğ¸
    streak_win: int = 0           # Ñ‚ĞµĞºÑƒÑ‰Ğ°Ñ ÑĞµÑ€Ğ¸Ñ Ğ¿Ğ¾Ğ±ĞµĞ´
    streak_fail: int = 0          # Ñ‚ĞµĞºÑƒÑ‰Ğ°Ñ ÑĞµÑ€Ğ¸Ñ Ğ½ĞµÑƒĞ´Ğ°Ñ‡
    
    # Ğ Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ
    bins_hist: Dict[str, int]     # Ğ¿Ğ¾ Ğ±Ğ¸Ğ½Ğ°Ğ¼ Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ½Ñ‹
    conf_hist: List[float]        # Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ÑƒĞ²ĞµÑ€ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸
    
    # ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚
    contexts: List[PatternContext]  # Ğ²Ğ¾Ğ»Ğ°, Ğ²Ñ€ĞµĞ¼Ñ, Ğ¾Ğ±ÑŠÑ‘Ğ¼
    partner_refs: List[str]         # ÑÑÑ‹Ğ»ĞºĞ¸ Ğ½Ğ° Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€Ğ°
    
    # ĞœĞµÑ‚Ğ°
    created_at: datetime
    last_used_at: datetime
    weight: float = 1.0           # Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ²ĞµÑ
    cooldown_until: Optional[datetime] = None
```

### Ğ–Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CREATE    â”‚â”€â”€â”€â”€â–¶â”‚   UPDATE    â”‚â”€â”€â”€â”€â–¶â”‚   DECAY     â”‚
â”‚  (first use)â”‚     â”‚ (each use)  â”‚     â”‚ (periodic)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚                   â”‚
                           â–¼                   â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  COOLDOWN   â”‚     â”‚   ARCHIVE   â”‚
                    â”‚ (streak>=3) â”‚     â”‚ (old, low   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  win-rate)  â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Pipeline Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸

### Online Ñ†Ğ¸ĞºĞ» (ĞºĞ°Ğ¶Ğ´ÑƒÑ Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñƒ)

```
T=0:00 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   â”‚
   â”œâ”€â–º [1] CANDLE RECEIVED (Bybit WebSocket, confirm=true)
   â”‚       â”œâ”€â”€ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² storage
   â”‚       â””â”€â”€ ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ replay buffer
   â”‚
   â”œâ”€â–º [2] FEATURE EXTRACTION
   â”‚       â”œâ”€â”€ Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ Ñ„Ğ¸Ñ‡Ğ¸ (ATR, RSI, MACD, BB, ...)
   â”‚       â”œâ”€â”€ ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ
   â”‚       â””â”€â”€ Ğ¡Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾ĞºĞ½Ğ¾ (256 ÑĞ²ĞµÑ‡ĞµĞ¹)
   â”‚
   â”œâ”€â–º [3] ENSEMBLE PREDICTION
   â”‚       â”œâ”€â”€ ĞšĞ°Ğ¶Ğ´Ğ°Ñ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ â†’ MC Dropout (N passes)
   â”‚       â”œâ”€â”€ Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ predictions + uncertainties
   â”‚       â”œâ”€â”€ Weighted voting (EMA weights)
   â”‚       â”œâ”€â”€ Consensus check
   â”‚       â””â”€â”€ Broadcast Ğ² UI
   â”‚
   â”œâ”€â–º [4] RESULT CHECK (Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ·Ğ° T-H, Ğ³Ğ´Ğµ H = horizon)
   â”‚       â”œâ”€â”€ ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ winner
   â”‚       â”œâ”€â”€ ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ streaks (3 ÑƒÑ€Ğ¾Ğ²Ğ½Ñ)
   â”‚       â”œâ”€â”€ Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ rewards/penalties
   â”‚       â”œâ”€â”€ ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ EMA Ğ²ĞµÑĞ°
   â”‚       â”œâ”€â”€ ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½-Ğ¶ÑƒÑ€Ğ½Ğ°Ğ»
   â”‚       â””â”€â”€ Inter-model learning
   â”‚
   â”œâ”€â–º [5] ONLINE TRAINING
   â”‚       â”œâ”€â”€ Sample Ğ¸Ğ· replay buffer (recent + old mix)
   â”‚       â”œâ”€â”€ Multi-task loss (direction + bin)
   â”‚       â”œâ”€â”€ Gradient step (lr Ã— penalty_mult)
   â”‚       â””â”€â”€ Update EMA weights
   â”‚
   â””â”€â–º [6] CHECKPOINT (ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 30 Ğ¼Ğ¸Ğ½ÑƒÑ‚)
           â”œâ”€â”€ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
           â”œâ”€â”€ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ²ĞµÑĞ° Ğ°Ğ½ÑĞ°Ğ¼Ğ±Ğ»Ñ
           â””â”€â”€ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½-Ğ¶ÑƒÑ€Ğ½Ğ°Ğ»

T=1:00 â•â•â•â–º ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€ÑĞµĞ¼ Ñ†Ğ¸ĞºĞ»
```

---

## ğŸ–¥ï¸ API Ğ¸ Dashboard

### REST API

| ĞœĞµÑ‚Ğ¾Ğ´ | Endpoint | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|-------|----------|----------|
| GET | `/api/health` | Health check |
| GET | `/api/status` | Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ |
| GET | `/api/predictions/latest` | ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ·Ñ‹ |
| GET | `/api/predictions/history` | Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ·Ğ¾Ğ² |
| GET | `/api/metrics` | ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ (accuracy, ECE, coverage) |
| GET | `/api/ensemble/weights` | Ğ’ĞµÑĞ° Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹ |
| GET | `/api/ensemble/stats` | Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ°Ğ½ÑĞ°Ğ¼Ğ±Ğ»Ñ |
| GET | `/api/patterns` | Ğ¢Ğ¾Ğ¿ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ |
| GET | `/api/patterns/{id}` | Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ° |
| GET | `/api/streaks` | Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğµ ÑĞµÑ€Ğ¸Ğ¸ |
| POST | `/api/control/retrain` | ĞŸÑ€Ğ¸Ğ½ÑƒĞ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ |
| POST | `/api/control/pause` | ĞŸĞ°ÑƒĞ·Ğ° Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ° |
| POST | `/api/control/resume` | Ğ’Ğ¾Ğ·Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ |
| POST | `/api/control/threshold` | Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ñ€Ğ¾Ğ³ |
| POST | `/api/control/rollback` | ĞÑ‚ĞºĞ°Ñ‚ Ğº Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰ĞµĞ¹ Ğ²ĞµÑ€ÑĞ¸Ğ¸ |

### WebSocket Events

```javascript
// ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
ws://localhost:8000/ws

// Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
{ "type": "price", "data": { "price": 97250.50, "timestamp": ... } }
{ "type": "candle", "data": { "ohlcv": [...], "confirmed": true } }
{ "type": "prediction", "data": {
    "timeframe": "5m",
    "signal": "UP",
    "confidence": 0.72,
    "consensus": 0.875,
    "model_votes": {...}
}}
{ "type": "result", "data": {
    "timeframe": "5m",
    "actual": "UP",
    "correct": true,
    "reward": 2.5
}}
{ "type": "alert", "data": {
    "level": "warning",
    "message": "Streak -5 on 1m timeframe"
}}
```

### Dashboard ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TITAN Dashboard                                    v1.0.0      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  [Overview] [Predictions] [Ensemble] [Patterns] [Metrics] [Logs]â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Current Price  â”‚  â”‚  Last Signal    â”‚  â”‚  Accuracy 24h   â”‚ â”‚
â”‚  â”‚  $97,250.50     â”‚  â”‚  UP (conf 0.72) â”‚  â”‚  76.5%          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    PRICE CHART                            â”‚ â”‚
â”‚  â”‚  [live chart with predictions overlay]                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  PREDICTIONS BY TIMEFRAME                                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚  â”‚  â”‚ TF â”‚ Signal â”‚Conf â”‚Consenusâ”‚Accuracy â”‚Streak â”‚        â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚ â”‚
â”‚  â”‚  â”‚ 1m â”‚  UP    â”‚0.68 â”‚  0.75  â”‚  74.2%  â”‚  +2   â”‚        â”‚ â”‚
â”‚  â”‚  â”‚ 5m â”‚  UP    â”‚0.72 â”‚  0.88  â”‚  77.1%  â”‚  +4   â”‚        â”‚ â”‚
â”‚  â”‚  â”‚15m â”‚ DOWN   â”‚0.61 â”‚  0.62  â”‚  73.8%  â”‚  -1   â”‚        â”‚ â”‚
â”‚  â”‚  â”‚60m â”‚ HOLD   â”‚0.45 â”‚  0.50  â”‚  71.2%  â”‚   0   â”‚        â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš™ï¸ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

### config/base.yaml

```yaml
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# TITAN BASE CONFIGURATION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

project:
  name: "Titan"
  version: "1.0.0"

data:
  symbol: "BTCUSDT"
  source: "bybit_spot"
  base_timeframe: "1m"
  
  bybit:
    rest_url: "https://api.bybit.com"
    ws_url: "wss://stream.bybit.com/v5/public/spot"
    rate_limit: 10  # requests per second

  storage:
    type: "sqlite+parquet"
    db_path: "data/titan.db"
    candles_path: "data/candles/"
    
  replay_buffer:
    size: 50000
    recent_window: 2000
    recent_frac: 0.5
    prioritized: true
    alpha: 0.6

features:
  window: 256  # ÑĞ²ĞµÑ‡ĞµĞ¹ Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
  atr_window: 60
  
  columns:
    - log_ret
    - log_vol
    - rsi_norm
    - atr_rel
    - macd_rel
    - bb_pb
    - hour_sin
    - hour_cos
    - dow_sin
    - dow_cos

horizons: [1, 5, 10, 15, 30, 60]

prediction:
  min_confidence: 0.55
  min_consensus: 0.70
  signal_on_low_confidence: "HOLD"
  
  thresholds:
    c_thr_base: 0.55
    c_thr_min: 0.50
    c_thr_max: 0.90
    delta_conflict: 0.1

api:
  host: "0.0.0.0"
  port: 8000
  cors_origins: ["*"]

logging:
  level: "INFO"
  format: "%(asctime)s | %(levelname)s | %(name)s | %(message)s"
  file: "logs/titan.log"
```

### config/ensemble.yaml

```yaml
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ENSEMBLE CONFIGURATION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ensemble:
  num_models: 6
  
  # ĞĞ²Ñ‚Ğ¾Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²
  auto_generate: true
  
  architectures:
    - type: "lstm"
      count: 3
    - type: "transformer"
      count: 3
      
  learning_rate:
    min: 0.0001
    max: 0.01
    scale: "log"
    
  dropout:
    min: 0.1
    max: 0.25
    scale: "linear"
    
  # MC Dropout
  mc_dropout:
    passes_default: 7
    passes_min: 3
    passes_max: 10
    latency_threshold_ms: 8000

weights:
  ema_alpha: 0.1
  initial_weight: 1.0
  min_weight: 0.01
  max_weight: 5.0
  uncertainty_penalty: 0.5
  
  # ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ alpha
  adaptive_alpha:
    enabled: true
    increase_on_streak: 0.02  # +2% Ğ¿Ñ€Ğ¸ ÑĞµÑ€Ğ¸Ğ¸ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
    decrease_on_stable: 0.01  # -1% Ğ¿Ñ€Ğ¸ ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ğ¾Ğ±ĞµĞ´Ğ°Ñ…

inter_model:
  enabled: true
  winner_alignment_weight: 0.3
  loser_correction_weight: 0.5
  top_k_leaders: 3

# ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ¸ Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹ (ĞµÑĞ»Ğ¸ auto_generate: false)
models:
  - id: 0
    type: "lstm"
    d_model: 128
    num_layers: 2
    learning_rate: 0.0001
    dropout: 0.1
    
  - id: 1
    type: "lstm"
    d_model: 128
    num_layers: 3
    learning_rate: 0.0005
    dropout: 0.15
    
  - id: 2
    type: "lstm"
    d_model: 256
    num_layers: 2
    learning_rate: 0.001
    dropout: 0.2
    
  - id: 3
    type: "transformer"
    d_model: 128
    num_layers: 4
    num_heads: 4
    learning_rate: 0.0001
    dropout: 0.1
    
  - id: 4
    type: "transformer"
    d_model: 256
    num_layers: 4
    num_heads: 8
    learning_rate: 0.0005
    dropout: 0.15
    
  - id: 5
    type: "transformer"
    d_model: 256
    num_layers: 6
    num_heads: 8
    learning_rate: 0.001
    dropout: 0.2
```

### config/training.yaml

```yaml
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# TRAINING CONFIGURATION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ĞŸÑ€ĞµĞ´Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ (offline)
pretrain:
  epochs: 50
  batch_size: 64
  learning_rate: 0.001
  weight_decay: 0.01
  warmup_steps: 500
  gradient_clip: 1.0
  
  validation_split: 0.1
  early_stopping_patience: 10
  
  # Ğ ĞµĞ¶Ğ¸Ğ¼Ñ‹: batch, simulated_online
  mode: "simulated_online"
  
  # EMA Ğ²ĞµÑĞ¾Ğ² Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
  ema_decay: 0.999

# Online Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ
online:
  interval_minutes: 1
  batch_size: 32
  learning_rate: 0.0001
  gradient_clip: 1.0
  steps_per_candle: 3
  
  # EMA Ğ²ĞµÑĞ¾Ğ² Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ (Ğ±Ñ‹ÑÑ‚Ñ€ĞµĞµ Ñ‡ĞµĞ¼ pretrain)
  ema_decay: 0.99
  
  # Replay buffer sampling
  replay:
    recent_frac: 0.5      # 50% Ğ¸Ğ· Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ñ… 2000
    old_frac: 0.5         # 50% Ğ¸Ğ· ÑÑ‚Ğ°Ñ€Ñ‹Ñ…
    prioritized: true
    alpha: 0.6
    
  # ĞŸÑĞµĞ²Ğ´Ğ¾Ñ€Ğ°Ğ·Ğ¼ĞµÑ‚ĞºĞ°
  pseudo_labels:
    enabled: true
    min_confidence: 0.7
    max_frac: 0.1         # Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 10% Ğ±Ğ°Ñ‚Ñ‡Ğ°

# Loss Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ
loss:
  direction_weight: 1.0
  bin_weight: 0.3
  calibration_weight: 0.1
  kl_to_previous: 0.05    # stability regularization

# Ğ§ĞµĞºĞ¿Ğ¾Ğ¸Ğ½Ñ‚Ñ‹
checkpoints:
  save_every_minutes: 30
  keep_last_n: 5
  path: "artifacts/checkpoints/"
```

---

## ğŸ“‹ CLI Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ

### titan.py

```python
"""
Titan CLI - Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ°

Usage:
    titan.py bootstrap [--force-train] [--detach]
    titan.py run [--debug] [--windows]
    titan.py stop
    titan.py reset [-y]
    titan.py train [--mode=<mode>] [--days=<days>] [--epochs=<epochs>]
    titan.py evaluate [--start=<date>] [--end=<date>]
    titan.py download [--days=<days>]
    titan.py status
    titan.py version

Commands:
    bootstrap    ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° â†’ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ â†’ Ğ·Ğ°Ğ¿ÑƒÑĞº)
    run          Ğ—Ğ°Ğ¿ÑƒÑĞº live Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ°
    stop         ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
    reset        Ğ¡Ğ±Ñ€Ğ¾Ñ (Ğ»Ğ¾Ğ³Ğ¸, state, Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸)
    train        ĞĞ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
    evaluate     ĞÑ†ĞµĞ½ĞºĞ° Ğ½Ğ° Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
    download     Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
    status       Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
    version      Ğ’ĞµÑ€ÑĞ¸Ñ

Options:
    --force-train       ĞŸÑ€Ğ¸Ğ½ÑƒĞ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ğ¿ĞµÑ€ĞµĞ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ
    --detach            Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ² Ñ„Ğ¾Ğ½Ğµ
    --debug             Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
    --windows           Ğ”Ğ²Ğ° Ğ¾ĞºĞ½Ğ° (Ğ»Ğ¾Ğ³Ğ¸ + Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³)
    --mode=<mode>       Ğ ĞµĞ¶Ğ¸Ğ¼ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ [batch|simulated_online]
    --days=<days>       ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ´Ğ½ĞµĞ¹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
    --epochs=<epochs>   ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑĞ¿Ğ¾Ñ…
    -y                  Ğ‘ĞµĞ· Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ

Examples:
    # ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚ Ñ Ğ½ÑƒĞ»Ñ
    python titan.py bootstrap --force-train
    
    # Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ Ğ´Ğ²ÑƒĞ¼Ñ Ğ¾ĞºĞ½Ğ°Ğ¼Ğ¸ (Ğ»Ğ¾Ğ³Ğ¸ + Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€)
    python titan.py run --windows --debug
    
    # ĞÑ„Ğ»Ğ°Ğ¹Ğ½-Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ½Ğ° 30 Ğ´Ğ½ÑÑ…
    python titan.py train --mode simulated_online --days 30 --epochs 50
    
    # Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸
    python titan.py download --days 60
"""
```

---

## ğŸ“Š ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ ÑƒÑĞ¿ĞµÑ…Ğ°

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | Ğ¦ĞµĞ»ĞµĞ²Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|---------|------------------|----------|
| **Accuracy** | â‰¥75% | Ğ”Ğ¾Ğ»Ñ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ·Ğ¾Ğ² |
| **Confidence/Calibration** | â‰¥75% | ECE < 0.05 |
| **Consensus** | >70% | Ğ¡Ğ¾Ğ³Ğ»Ğ°ÑĞ¸Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹ Ğ² Ğ°Ğ½ÑĞ°Ğ¼Ğ±Ğ»Ğµ |
| **Coverage** | 70-90% | Ğ”Ğ¾Ğ»Ñ Ğ²Ñ‹Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ² (Ğ½Ğµ HOLD) |
| **Latency** | <100ms (CPU) | Ğ’Ñ€ĞµĞ¼Ñ Ğ¸Ğ½Ñ„ĞµÑ€ĞµĞ½ÑĞ° |
| **Max Error Streak** | <5 | ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑĞµÑ€Ğ¸Ñ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº |

---

## ğŸ—“ï¸ ĞŸĞ»Ğ°Ğ½ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸

### Ğ¤Ğ°Ğ·Ğ° 1: Ğ¯Ğ´Ñ€Ğ¾ (2-3 Ğ½ĞµĞ´ĞµĞ»Ğ¸)
- [ ] Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° Ğ¸ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ¸
- [ ] Data layer (Bybit client, storage, replay buffer)
- [ ] Feature pipeline
- [ ] Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ (LSTM, Transformer-lite)
- [ ] Dual-head architecture

### Ğ¤Ğ°Ğ·Ğ° 2: Ensemble (2 Ğ½ĞµĞ´ĞµĞ»Ğ¸)
- [ ] Model wrapper Ñ MC Dropout
- [ ] Weight manager (EMA)
- [ ] Weighted voting
- [ ] Inter-model learning
- [ ] Config generator

### Ğ¤Ğ°Ğ·Ğ° 3: Rewards & Patterns (1-2 Ğ½ĞµĞ´ĞµĞ»Ğ¸)
- [ ] 3-ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° ÑˆÑ‚Ñ€Ğ°Ñ„Ğ¾Ğ²
- [ ] Streak tracker
- [ ] ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½-Ğ¶ÑƒÑ€Ğ½Ğ°Ğ»
- [ ] ĞšĞ°Ğ»Ğ¸Ğ±Ñ€Ğ¾Ğ²ĞºĞ° (temperature scaling)

### Ğ¤Ğ°Ğ·Ğ° 4: Training (1-2 Ğ½ĞµĞ´ĞµĞ»Ğ¸)
- [ ] Offline trainer (batch + simulated)
- [ ] Online trainer
- [ ] Multi-task loss
- [ ] Checkpointing

### Ğ¤Ğ°Ğ·Ğ° 5: Services & UI (1-2 Ğ½ĞµĞ´ĞµĞ»Ğ¸)
- [ ] Collector service
- [ ] Trainer service  
- [ ] Inferencer service
- [ ] FastAPI server
- [ ] Dashboard UI

### Ğ¤Ğ°Ğ·Ğ° 6: Testing & Polish (1 Ğ½ĞµĞ´ĞµĞ»Ñ)
- [ ] Unit tests
- [ ] Integration tests
- [ ] E2E tests
- [ ] Documentation
- [ ] Performance optimization

---

## ğŸš€ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

```bash
# 1. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°
git clone <repo>
cd titan
python -m venv venv
venv\Scripts\activate  # Windows
pip install -e .

# 2. Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
python titan.py download --days 30

# 3. ĞŸÑ€ĞµĞ´Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ
python titan.py train --mode simulated_online --days 14 --epochs 50

# 4. Ğ—Ğ°Ğ¿ÑƒÑĞº
python titan.py run --windows

# 5. Dashboard
# http://localhost:8000
```

---

## ğŸ“š Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Apex | Granit | ĞĞ¾Ğ²Ğ¾Ğµ |
|-----------|:----:|:------:|:-----:|
| PyTorch framework | âœ… | | |
| LSTM backbone | âœ… | | |
| Transformer backbone | | âœ… | |
| Dual-head architecture | âœ… | âœ… | |
| Cross-connect | âœ… | âœ… | |
| Ensemble ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° | | âœ… | |
| MC Dropout | | âœ… | |
| EMA weights | | âœ… | |
| Inter-model learning | | âœ… | |
| 3-ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ñ‹Ğµ ÑˆÑ‚Ñ€Ğ°Ñ„Ñ‹ | | âœ… | |
| Ğ‘Ğ¸Ğ½Ñ‹ Ğ¿Ğ¾ Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ½Ğµ | âœ… | | |
| ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½-Ğ¶ÑƒÑ€Ğ½Ğ°Ğ» | âœ… | | |
| Temperature scaling | âœ… | | |
| ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ | âœ… | | |
| Dashboard | âœ… | âœ… | âœ… |
| ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ½Ñ‹Ğ¹ replay | | | âœ… |
| Ğ“Ğ¸Ğ±Ñ€Ğ¸Ğ´Ğ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° | | | âœ… |

---

## ğŸ“„ Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ

Private / Internal Use

---

*Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ½: 2025-12-18*
*Ğ’ĞµÑ€ÑĞ¸Ñ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ°: 1.0.0*


