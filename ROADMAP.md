# ROADMAP

Формат ведения:

- Каждый пункт имеет статус [ ] / [x].
- Пункты отсортированы по убыванию эффективности.
- Для каждого пункта указаны сложность и затраты реализации.
- Под пунктом фиксируйте результат и промежуточные изменения с эффектом.

# *28.12.2025*

## Приоритет (по эффективности)

1. [x] Стабилизировать сбор данных WS: авто-reconnect, контроль пропусков, дедупликация, confirm-свечи, REST-догрузка. (Сложность: высокая; Затраты: средние)
    Результат: добавлены контроль разрывов, дедупликация и REST-догрузка; статистика качества данных пишется в summary.
        1.1 [ ] Промежуточные изменения: live-тест `runs/live_ws_stable` (candles=3, gaps=0, backfilled=0, duplicates=0, out_of_order=0).
Промежуточное изменение между пунктами 1 и 2: дать возможность подгружать/просматривать необходимый прошедший период исторических данных для прогрева фичей.
  Результат: реализован prefill для history-теста с учетом окон фичей и eval-buffer.
  Промежуточные изменения: тест `runs/history_prefill` (target_candles=120, total_predictions=119, skipped_predictions=1; метаданные prefill записаны в summary).
2. [ ] Динамический порог FLAT и margin на скользящем окне по качеству/убыткам. (Сложность: средняя; Затраты: низкие)
    Результат:
    Промежуточные изменения:
3. [ ] Онлайн-калибровка уверенности (confidence bins -> correction). (Сложность: средняя; Затраты: низкие)
    Результат:
    Промежуточные изменения:
4. [ ] Снижение уверенных ошибок: конфликт паттерн vs ансамбль -> снижение уверенности или FLAT. (Сложность: средняя; Затраты: низкие)
    Результат:
    Промежуточные изменения:
5. [ ] Усилить паттерны: минимальный порог наблюдений + weight-of-evidence для коррекции. (Сложность: средняя; Затраты: низкие)
    Результат:
    Промежуточные изменения:
6. [ ] Режимные веса ансамбля: веса моделей зависят от vol_z/volume_z. (Сложность: средняя; Затраты: низкие)
    Результат:
    Промежуточные изменения:
7. [ ] Многомасштабные нормализации/z-score (окна 5/20/60) без смены TF. (Сложность: средняя; Затраты: низкие)
    Результат:
    Промежуточные изменения:
8. [ ] Добавить свечные фичи 1m: range (high-low), body (close-open), хвосты, ATR-like, "напряжение". (Сложность: низкая; Затраты: низкие)
    Результат:
    Промежуточные изменения:
9. [ ] TRENDVIC: тренд-strength на нескольких окнах. (Сложность: средняя; Затраты: низкие)
    Результат:
    Промежуточные изменения:
10. [ ] VOLUMEMETRIX: зависимость объема от волатильности (объем/волатильность и режимы). (Сложность: низкая; Затраты: низкие)
    Результат:
    Промежуточные изменения:
11. [ ] OSCILLATOR: RSI + Stoch (или близкие осцилляторы). (Сложность: низкая; Затраты: низкие)
    Результат:
    Промежуточные изменения:
12. [ ] Контроль дрейфа распределений фич (volatility_z, volume_z, ma_delta) и сигнал смены режима. (Сложность: средняя; Затраты: средние)
    Результат:
    Промежуточные изменения:
13. [ ] Лимиты и защита от деградации: авто-повышение порогов при падении качества. (Сложность: средняя; Затраты: низкие)
    Результат:
    Промежуточные изменения:
14. [ ] Метрики стабильности: rolling accuracy, ECE/MCE, доля уверенных ошибок, баланс направлений. (Сложность: средняя; Затраты: низкие)
    Результат:
    Промежуточные изменения:
15. [ ] Мониторинг лагов и задержек: сбор данных -> прогноз -> запись (1m соответствие). (Сложность: низкая; Затраты: низкие)
    Результат:
    Промежуточные изменения:
16. [ ] Витрина данных: стандартизировать запись решений, исходов и контекста. (Сложность: низкая; Затраты: низкие)
    Результат:
    Промежуточные изменения:
17. [ ] Регулярные исторические тесты по расписанию (2h/6h/24h) с архивом отчетов. (Сложность: низкая; Затраты: низкие)
    Результат:
    Промежуточные изменения: ручной прогон `runs/history_ws_stable` на 2 часа для контроля базового качества.
